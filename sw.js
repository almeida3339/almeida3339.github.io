const CACHE_NAME="achados-de-cozinha-v4",IMAGE_CACHE_NAME="achados-imagens-v1",urlsToCache=["/","/index.html","/style.css","/script.js","/products.json","/perfil.jpg","/politica-de-privacidade.html","/offline.html"];async function cacheFirstWithNetworkFallback(t){let e=await caches.open(CACHE_NAME),a=await e.match(t);if(a)return a;try{let i=await fetch(t);return i}catch(n){let l=await e.match("/offline.html");return l}}async function staleWhileRevalidate(t){let e=await caches.open(IMAGE_CACHE_NAME),a=await e.match(t),i=fetch(t).then(a=>(e.put(t,a.clone()),a));return a||i}self.addEventListener("install",t=>{t.waitUntil(caches.open(CACHE_NAME).then(t=>t.addAll(urlsToCache)))}),self.addEventListener("activate",t=>{t.waitUntil(caches.keys().then(t=>Promise.all(t.filter(t=>t.startsWith("achados-de-cozinha-")&&t!==CACHE_NAME||t.startsWith("achados-imagens-")&&t!==IMAGE_CACHE_NAME).map(t=>caches.delete(t)))))}),self.addEventListener("fetch",t=>{let{request:e}=t;if("GET"!==e.method)return;let a=new URL(e.url);a.pathname.startsWith("/images/")?t.respondWith(staleWhileRevalidate(e)):t.respondWith(cacheFirstWithNetworkFallback(e))});